# 电商项目@微商城litemall



## 商品管理模块面试题

- 你能解释一下什么是sku和spu吗？

  spu是商品的公共信息，sku是商品的规格信息。比如一个华为手机，spu是鸿蒙系统，骁龙的cpu，4000毫安的电池，6.5寸的屏幕等等。

  但是这部手机的颜色和容量是有很多种规格的，假设有三种颜色和三种容量，就有九种规格。关系：spu：skun = 1：n

- 如果删除spu记录，sku记录怎么处理

  如果是物理删除，在删除spu记录之前，先判断spu是否有关联的订单，如果有关联的订单，那么spu记录是不可以删除的。如果没有关联的订单是可以删除spu记录的，spu删除要连带着sku记录。

  如果是软删除，就不需要spu是否存在关联的订单了。可以软删除，同时要软删除关联的sku记录。

- 你做的电商系统是单商铺的还是多商铺的

  做的是B2C模式的，也就是单商铺的模式。如果是多商铺的C2C电商系统，商铺之间的数据是要隔离的。不能交叉访问，所以设计数据表的时候，需要引入商铺表，让spu关联到商铺（商铺ID），这样每个商铺就只能看到自己商铺的数据了

- 如何避免客户投诉的时候商家随意篡改信息

  虽然做的是单商铺的电商系统，只要商家编辑商品就生成新的商品记录，当用户根据订单查询商品，并不会查询到最新的商品记录，而是查询到下单时的商品记录。单商家的商品量不会有成千上万的数据，如果是C2C的，这样会保存大量的数据（spu、sku）。超过两千万数据，mysql的读写性能就会很差，应该单独创建spu、sku的归档数据表（历史表）；把归档数据转移到归档数据表里；这样就能实现对spu、sku表的缩表，这种设计交冷热数据分离。

- 删除商品记录用逻辑是删除，还是软删除（逻辑删除）

  软删除

- 怎么提高商品信息的加载速度

- 提高前端的渲染速度有很多种优化方案，首先是数据库方面，可以优化sql语句，多利用索引，设置innodb缓冲池，增加数据库的线程数量；数据库连接池方面增加连接数量，如果是小型项目，可以使用mysql分区技术。把数据切分存储到不同的硬盘上。多块硬盘的io优于单块，mysql的读写速度就可以提升了。如果是大型项目，数据库要使用集群。数据要做分库分表，要做数据的读写分离。冷热数据分离。后台也可以改进，如引入缓存，如果命中缓存就不需要走数据库了。后台项目的网络连接方式可以由bio优化至nio，依靠少量的线程就可以处理更多的网络请求。增加tomcat线程数量，提高网络吞吐能力，也可以对tomcat添加负载均衡，增加后台项目的负载能力。另外，可以使用cdn服务，缓存静态的网页和图片，这样浏览器加载商品信息也能更快一些。前端方面也能做些优化，比如减少http请求，能合并的请求合并为一个请求，素材图片可以使用雪花图，商品图片可以使用延时加载的方法。

- 你的电商系统是否支持顾客使用商品参数查找商品？

  规格参数（sku），如床垫，1.5m床垫*1，带有特殊符号等，或者带有json格式的数据，使用like模糊查询效率低，可以使用es来应对。可以在录入商品时，把商品同步到es，参数，商品名称，id写到es中，拿到id，在去数据库查询，最后渲染在页面上。

- 既然用到了es，那么sku还有什么实际意义吗

  es不能替代sku数据表，虽然es检索数据优于mysql，但是es不存放商品的全部信息；只是存放被检索的作为查询条件的信息；页面渲染详细的sku信息需要读取sku表中的信息。

- 如果用户查询“最好看的全面屏手机”，你应该怎么实现呢？

  es中ik中分分词器可以进行语义分析，“最好看的全面屏手机”，可能没有任何产品或参数是这样的，通过中文分词技术，提取关键词，忽略形容词。即“全面屏手机”，这样就能检索到信息了。

- 存放商品图片你用的是什么图床？

  腾讯云的对象存储服务。开通对象存储服务，后台系统配置appkey appid，设置存储桶，后台调用腾讯云提供的api接口，就可以把图片上传到云端了。

  

  todo

  5-5  5-6 6-7  7-4 笔记待整理

  

  

  

  



